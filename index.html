<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Folder ZIP</title>
    <script src="cdnjs.cloudflare.com"></script>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 2rem auto; padding: 0 1rem; line-height: 1.5; }
        textarea { width: 100%; height: 300px; font-family: monospace; margin-bottom: 1rem; padding: 10px; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 4px; }
        button:hover { background: #0056b3; }
        .hint { color: #666; font-size: 0.9rem; }
    </style>
</head>
<body>
    <h1>Text Tree to ZIP</h1>
    <p class="hint">Indent with spaces or tabs. Folders should end with / or have children.</p>
    
    <textarea id="structureInput" placeholder="project/
  src/
    main.js
    styles.css
  index.html
  README.md"></textarea>
    
    <br>
    <button onclick="generateZip()">Generate and Download ZIP</button>

    <script>
        async function generateZip() {
            const zip = new JSZip();
            const text = document.getElementById('structureInput').value;
            const lines = text.split('\n');
            
            // Track the path at each indentation level
            const pathStack = [];

            lines.forEach(line => {
                if (!line.trim()) return;

                // Match leading spaces/tabs and the name
                const match = line.match(/^(\s*)(.*)$/);
                const indent = match[1].length;
                const name = match[2].trim();

                // Determine level based on indentation (assuming 2 spaces per level)
                // You can adjust the logic if your indentation varies
                const level = Math.floor(indent / 2);
                
                // Adjust stack to current level
                pathStack.length = level;
                pathStack[level] = name;

                const fullPath = pathStack.filter(Boolean).join('/');

                if (name.endsWith('/') || name.indexOf('.') === -1) {
                    // Create folder
                    zip.folder(fullPath);
                } else {
                    // Create file (empty content)
                    zip.file(fullPath, "");
                }
            });

            // Generate the ZIP file
            const content = await zip.generateAsync({ type: "blob" });
            
            // Create download link
            const link = document.createElement('a');
            link.href = URL.createObjectURL(content);
            link.download = "structure.zip";
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>
</html>
